(()=>{var _=Object.defineProperty;var E=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var M=(e,t,i)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,y=(e,t)=>{for(var i in t||(t={}))I.call(t,i)&&M(e,i,t[i]);if(E)for(var i of E(t))X.call(t,i)&&M(e,i,t[i]);return e};var x={left:{x:-1,y:0,direction:"vertical"},right:{x:1,y:0,direction:"vertical"},top:{x:0,y:-1,direction:"horizontal"},bottom:{x:0,y:1,direction:"horizontal"}},f={left:"right",right:"left",top:"bottom",bottom:"top"};function G(e){return{x:e.x,y:e.y,dx:x[e.side].x,dy:x[e.side].y}}function $(e,t){return e.dx===0&&t.dx===0||e.dy===0&&t.dy===0?!1:e.x*e.dx<=t.x*e.dx&&e.y*e.dy<=t.y*e.dy&&t.x*t.dx<=e.x*t.dx&&t.y*t.dy<=e.y*t.dy}function p(e,t){return x[e[0]].direction===t[0]&&x[e[1]].direction===t[1]}function C(e,t,i=.5){let{side:n}=e,{side:o}=t,r=[n,o],s=20,u=G(e),a=G(t);if($(u,a))return[];if(p(r,["vertical","horizontal"]))return[{x:e.x+s*x[n].x},{y:t.y+s*x[o].y}];if(p(r,["horizontal","vertical"]))return[{y:e.y+s*x[n].y},{x:t.x+s*x[o].x}];if(p(r,["vertical","vertical"])){let h=x[n].x;return f[n]===o?h*e.x<h*t.x?[{x:e.x+(t.x-e.x)*i}]:[{x:e.x+s*h},{y:e.y+(t.y-e.y)*i},{x:t.x+s*x[o].x}]:[{x:h*Math.max(h*e.x,h*t.x)+s*h}]}if(p(r,["horizontal","horizontal"])){let h=x[n].y;return f[n]===o?h*e.y<h*t.y?[{y:e.y+(t.y-e.y)*i}]:[{y:e.y+s*h},{x:e.x+(t.x-e.x)*i},{y:t.y+s*x[o].y}]:[{y:h*Math.max(h*e.y,h*t.y)+s*h}]}return[]}function A(e,t,i){var u;let n=[["top","bottom"].includes(e.side)?{x:e.x}:{y:e.y},...i,["top","bottom"].includes(t.side)?{x:t.x}:{y:t.y}],o=(a,h,d)=>{let c="x"in h;return[a,c?{x:h.x,y:d.y}:{x:d.x,y:h.y}]},r="x"in n[0]?{x:n[0].x,y:e.y}:{x:e.x,y:n[0].y},s=[];for(let a=0;a<n.length;a++){let h=n[a],d=(u=n[a+1])!=null?u:"x"in h?{y:t.y}:{x:t.x},c=o(r,h,d);s.push(c),r=c[1]}return{sourceLineSegment:s[0],lineSegments:s.slice(1,-1),targetLineSegment:s[s.length-1],allLineSegments:s}}function B(e,t,i,n=10){let o=[];return e.forEach((r,s)=>{if(o.length||o.push(["M",r[0]]),s===e.length-1){let u=y({},r[1]);switch(i.side){case"left":u.x-=n;break;case"right":u.x+=n;break;case"top":u.y-=n;break;case"bottom":u.y+=n;break;default:break}o.push(["L",u])}else o.push(["L",r[1]])}),o}function F(e){return e.map(([t,...i])=>[t,...i.map(n=>typeof n=="number"?n:`${n.x},${n.y}`)].join(" ")).join(" ")}function z(e,t){let i=[],n=[],o=[];for(let r of e){let[s]=r;["L","H","V"].includes(s)||o.length>1&&(i.push([...o]),o.length=0),o.push(r)}o.length>1&&i.push([...o]);for(let r of i){let s=r.map(([,h])=>h),u=q(H(s)),a=[r[0]];u.forEach((h,d,c)=>{if(d>=2&&d<=c.length-2&&j(c[d-1],h,c[d+1])){let{p1:m,p2:b,p:S}=Y(c[d-1],h,c[d+1],t);a.push(["L",m],["C",m,S,b])}else d>0&&a.push(["L",h])}),n.push(...a)}return n}function q(e){let t=[];return e.forEach((i,n)=>{let[o,r,s]=[i,e[n+1],e[n+2]];if(!s||!r){t.push(o);return}let u={x:o.x+(r.x-o.x)/2,y:o.y+(r.y-o.y)/2};t.push(o,u)}),t}function H(e){let t=new Set,i=[];return e.forEach((n,o)=>{let r=e[o-1],s=e[o+1];if((r==null?void 0:r.x)===n.x&&n.x===(s==null?void 0:s.x)||(r==null?void 0:r.y)===n.y&&n.y===(s==null?void 0:s.y))return;let u=`${n.x}|${n.y}`;t.has(u)||i.push(n)}),i}var T=(e,t)=>({type:"vector",x:t.x-e.x,y:t.y-e.y}),D=e=>{let t=e.x*e.x+e.y*e.y;return t=Math.sqrt(t),{type:"vector",x:e.x/t,y:e.y/t}},Y=(e,t,i,n)=>{let o=T(t,e),r=T(t,i),s=Math.hypot(o.x,o.y),u=Math.hypot(r.x,r.y);if(s*u===0)return{p1:t,p2:t,p:t};let a=Math.min(n,s-.1,u-.1),h=D(o),d=D(r),c={x:t.x+h.x*a,y:t.y+h.y*a},m={x:t.x+d.x*a,y:t.y+d.y*a};return{p1:c,p2:m,p:t}};function j(e,t,i){return!(e.x===t.x&&i.x===t.x||e.y===t.y&&i.y===t.y)}var l=class{toJSON(){let{top:t,left:i,bottom:n,right:o,width:r,height:s,x:u,y:a}=this;return{top:t,left:i,bottom:n,right:o,width:r,height:s,x:u,y:a}}constructor(t){if(Array.isArray(t)){let i=Math.min(t[0].x,t[1].x),n=Math.max(t[0].x,t[1].x)-i,o=Math.min(t[0].y,t[1].y),r=Math.max(t[0].y,t[1].y)-o;this.top=o,this.left=i,this.width=n,this.right=this.left+this.width,this.height=r,this.bottom=this.top+this.height,this.x=this.left,this.y=this.top}else this.top="top"in t?t.top:"y"in t?t.y:t.bottom-t.height,this.left="left"in t?t.left:"x"in t?t.x:t.right-t.width,this.bottom="bottom"in t?t.bottom:this.top+t.height,this.right="right"in t?t.right:this.left+t.width,this.width=this.right-this.left,this.height=this.bottom-this.top,this.x=this.left,this.y=this.top}point(t,i,n){let o=y({x:0,y:0},n);switch(t){case"left":o.x=this.left;break;case"right":o.x=this.right;break;case"center":o.x=this.left+this.width/2;break;default:break}switch(i){case"top":o.y=this.top;break;case"bottom":o.y=this.bottom;break;case"center":o.y=this.top+this.height/2;break;default:break}return o}get center(){return{x:this.left+this.width/2,y:this.top+this.height/2}}centerSide(t,i=0){switch(t){case"left":return{side:"left",x:this.left-i,y:this.center.y};case"right":return{side:"right",x:this.right+i,y:this.center.y};case"top":return{side:"top",x:this.center.x,y:this.top-i};case"bottom":return{side:"bottom",x:this.center.x,y:this.bottom+i}}}relativeSide(t,i){switch(t){case"left":case"right":return{side:t,x:this[t],y:this.y+this.height*i};case"top":case"bottom":return{side:t,x:this.x+this.width*i,y:this[t]}}}getRelativeSidePoint(t){let{side:i}=t;switch(i){case"left":case"right":{let n=this.height===0?.5:(t.y-this.y)/this.height;return{side:i,percent:n}}case"top":case"bottom":{let n=this.width===0?.5:(t.x-this.x)/this.width;return{side:i,percent:n}}}}sideSegment(t){switch(t){case"left":return[{x:this.left,y:this.top},{x:this.left,y:this.bottom}];case"right":return[{x:this.right,y:this.top},{x:this.right,y:this.bottom}];case"top":return[{x:this.left,y:this.top},{x:this.right,y:this.top}];case"bottom":return[{x:this.left,y:this.bottom},{x:this.right,y:this.bottom}];default:throw new Error("Invalid side")}}equals(t){return["top","left","bottom","right"].every(i=>t[i]===this[i])}translate(t,i){return new l({left:this.left+t,top:this.top+i,width:this.width,height:this.height})}moveTo(t){return new l({left:t.x,top:t.y,width:this.width,height:this.height})}withPadding(t,i=t){return new l({left:this.left-t,right:this.right+t,top:this.top-i,bottom:this.bottom+i})}getBox(){return[{x:this.left,y:this.top},{x:this.right,y:this.bottom}]}};var g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("style",`
position: absolute;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
max-width: 100%;
overflow: visible;
pointer-events: none;
z-index: 2;
`);var O=document.createElementNS("http://www.w3.org/2000/svg","defs");O.innerHTML=`
<marker
  id="arrow"
  viewBox="0 0 10 10"
  markerWidth="5"
  markerHeight="5"
  refX="0"
  refY="5"
  markerUnits="strokeWidth"
  orient="auto"
>
  <path data-arrow="marker" d="M0,0 L0,10 L10,5 z" fill="currentcolor" />
</marker>
`;g.appendChild(O);document.body.appendChild(g);function v(e,t){let i=new ResizeObserver(()=>{requestAnimationFrame(()=>{e.ownerDocument.contains(e)&&t(e.getBoundingClientRect())})});return i.observe(e),()=>i.unobserve(e)}function W(e){var u;let t=y({radius:10},e),{source:i,target:n}=t;function o(){var L,k,R;let a=new l(g.getBoundingClientRect()),h=new l(i.getBoundingClientRect()),d=new l(n.getBoundingClientRect()),c=h.relativeSide(t.sourceSide,(L=t.sourcePosition)!=null?L:.5),m=d.relativeSide(t.targetSide,(k=t.targetPosition)!=null?k:.5);f[t.sourceSide]===t.targetSide&&t.targetPosition===void 0&&(["top","bottom"].includes(t.targetSide)&&c.x>d.left&&c.x<d.right?m.x=c.x:c.y>d.top&&c.y<d.bottom&&(m.y=c.y)),c.y-=a.top,m.y-=a.top;let b=C(c,m,(R=t.bendPosition)!=null?R:.5),S=A(c,m,b),V=B(S.allLineSegments,c,m);return F(z(V,t.radius))}let r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("stroke",(u=t.color)!=null?u:"white"),r.setAttribute("stroke-width","2"),r.setAttribute("fill","none"),r.setAttribute("d",o()),r.setAttribute("marker-end","url(#arrow)"),t.attributes&&Object.entries(t.attributes).forEach(([a,h])=>{r.setAttribute(a,h)}),g.appendChild(r);let s={redraw:()=>{r.setAttribute("d",o())}};return v(i,s.redraw),v(n,s.redraw),s}function w(e){return e!==void 0?+e:void 0}var U=document.querySelectorAll("[data-edge-source]"),P=[];U.forEach(e=>{var a,h;let t=e.dataset.edgeTarget;if(!t)return;let i=document.querySelector(`[data-edge-source="${t}"]`);if(!i)return;let n=(a=e.dataset.edgeSourceSide)!=null?a:"bottom",o=(h=e.dataset.edgeTargetSide)!=null?h:"top",r=w(e.dataset.edgeSourcePosition),s=w(e.dataset.edgeTargetPosition),u=w(e.dataset.edgeBendPosition);P.push(W({source:e,sourceSide:n,sourcePosition:r,target:i,targetSide:o,targetPosition:s,bendPosition:u,attributes:{class:"edge"},radius:20}))});window.addEventListener("resize",()=>{P.forEach(e=>e.redraw())});v(document.body,()=>{P.forEach(e=>e.redraw())});})();
